# e_api_correct_order.py
電話認証対応　注文訂正（現物、信用共用）

ご注意！！ ================================

	本番環境に接続した場合、実際に注文が出ます。
	市場で条件が一致して約定した場合、取り消せません。
	十分にご注意いただき、ご利用ください。

===========================================

１）動作テストを実行した環境

	APIバージョン： v4r7
	python:3.11.2 / os:debian12

２）事前に立花証券ｅ支店に口座開設が必要です。
  
３）利用時に変数を設定してください。

	# 必要な設定項目
	# 注文受付番号: my_sOrderNumber（発注時に返される'sOrderNumber'）標準web画面の「照会／訂正／取消」画面の「状態」から開く「注文詳細」で確認可能。
	# 営業日: my_sEigyouDay（yyyymmdd 実行時の営業日）
	# 執行条件: my_sCondition  （*：変更なし、 0：指定なし、2：寄付、4：引け、6：不成）
	# 訂正値段: my_sOrderPrice （ *：変更なし、 0：成行に変更、訂正注文値段：指値を変更）
	# 訂正数量: my_sOrderSuryou （ *：変更なし、訂正数量：数量を変更（増株不可）。）
                                # ※訂正数量には、内出来を含んだ数量を指定

	# 訂正例 ----------------------
    # 値上げ: 100円 -> 110円
    ##my_sOrderNumber = '12345678'      
    ##my_sEigyouDay = '20221025'  
    ##my_sCondition = '*'
    ##my_sOrderPrice = '110'
    ##my_sOrderSuryou = '*'

    # 指値から成行に訂正
    ##my_sOrderNumber = '12345678'      
    ##my_sEigyouDay = '20221025'  
    ##my_sCondition = '*'
    ##my_sOrderPrice = '0'
    ##my_sOrderSuryou = '*'

    # 指値100円から指値100円不出来引け成に訂正
    ##my_sOrderNumber = '12345678'      
    ##my_sEigyouDay = '20221025'  
    ##my_sCondition = '6'
    ##my_sOrderPrice = '*'
    ##my_sOrderSuryou = '*'

    # 株数削減: 500株 -> 200株
    ##my_sOrderNumber = '12345678'      
    ##my_sEigyouDay = '20221025'  
    ##my_sCondition = '*'
    ##my_sOrderPrice = '*'
    ##my_sOrderSuryou = '200'

    # 価格と株数削減を同時に指定
    # 値上げ: 100円 -> 110円
    # 株数削減: 500株 -> 200株
    ##my_sOrderNumber = '12345678'      
    ##my_sEigyouDay = '20221025'  
    ##my_sCondition = '*'
    ##my_sOrderPrice = '110'
    ##my_sOrderSuryou = '200'


４)実行は、設定ファイルや「e_api_login_tel.py」と同じディレクトリで実行してください。

	事前に
	電話認証 ＋ ３分以内に e_api_login_tel.py を実行
	で、仮想URL（１日券）を取得しておいてください。

５）実行内容は、以下になります。

	注文訂正（現物、信用共用）
	上記に付随して、送信データや受信データを適宜print()文で出力します。

６）取得した文字列に日本語が入った場合、文字コードはshift-jisです。

７）利用時間外に接続した場合、"p_errno":"9"（システム、サービス停止中。）が返されます。

	詳しくは「立花証券・ｅ支店・ＡＰＩ、EVENT I/F 利用方法、データ仕様」4ページをご参照ください。
  
	なおデモ環境のご利用時間はデモ環境の案内ページでください。
  
８）本サンプルプログラムは、事務方の者が休日や空き時間に作成したため、色々足りておりません。ご容赦ください。

９）本プログラムは自由にご使用ください。

１０）このソフトウェアを使用したことによって生じたすべての障害・損害・不具合等に関して、私と私の関係者および私の所属するいかなる団体・組織とも、一切の責任を負いません。各自の責任においてご使用ください。
